{"version":3,"sources":["js/upload.js","js/app.js"],"names":["Uploader","selector","configs","document","querySelector","createElement","classList","add","textContent","style","display","insertAdjacentHTML","nextElementSibling","append","imgsGroup","after","addEventListener","e","Array","from","target","files","forEach","file","reader","FileReader","onload","text","name","length","slice","isSafari","navigator","userAgent","includes","type","result","bytesToSize","size","readAsDataURL","multiple","setAttribute","accept","isArray","join","click","dataset","status","removeAnimation","toggle","items","querySelectorAll","item","removeEventListener","contains","filter","fileName","remove","setTimeout","bytes","i","parseInt","Math","floor","log","round","pow","uploader","BtnCreater","PreviewPrinter"],"mappings":";AAkKE,aAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,OAAA,eAAA,EAAA,YAAA,CAAA,UAAA,IAAA,EAAA,SAAA,EAAA,EAAA,GAAA,EAAA,EAAA,GAAA,EAAA,IAAA,GAAA,SAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,IAAA,GAAA,MAAA,IAAA,UAAA,kEAAA,SAAA,EAAA,EAAA,EAAA,GAAA,IAAA,EAAA,IAAA,GAAA,MAAA,IAAA,UAAA,kDAAA,OAAA,EAAA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,EAAA,EAAA,EAAA,EAAA,QAAA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,KAAA,GAAA,EAAA,MAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,EAAA,EAAA,EAAA,EAAA,EAAA,OAAA,GAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GAAA,IAAA,EAAA,IAAA,GAAA,MAAA,IAAA,UAAA,gBAAA,EAAA,kCAAA,OAAA,EAAA,IAAA,GAAA,SAAA,EAAA,EAAA,EAAA,GAAA,GAAA,EAAA,IAAA,EAAA,IAAA,KAAA,EAAA,OAAA,CAAA,IAAA,EAAA,SAAA,MAAA,IAAA,UAAA,4CAAA,EAAA,MAAA,GAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAAA,IAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAlKmBA,EAAAA,WAOjB,SAAYC,EAAAA,GAAwB,IAAdC,EAAU,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAAI,EAAA,KAAA,GAAA,EAAA,KAAA,GAAA,EAAA,KAAA,GAAA,EAAA,KAAA,GAAA,EAAA,KAAA,GAAA,EAAA,KAAA,EAAA,CAAA,UAAA,EAAA,WAAA,IAAA,EAAA,KAAA,EAAA,CAAA,UAAA,EAAA,WAAA,IAAA,EAAA,KAAA,EAAA,CAAA,UAAA,EAAA,WAAA,IAAA,EAAA,KAAA,EAAA,CAAA,UAAA,EAAA,WAAA,IAAA,EAAA,KAAA,EAAA,CAAA,UAAA,EAAA,WAAA,IAChC,EAAcC,KAAAA,EAAAA,SAASC,cAAcH,IACrC,EAAgBC,KAAAA,EAAAA,GAyJtB,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,aAtJE,MAAA,SAAWD,GACP,EAAgBE,KAAAA,EAAAA,SAASE,cAAc,WAEvC,EAAcC,KAAAA,GAAAA,UAAUC,IAAI,qBAAsB,gBAClD,EAAcC,KAAAA,GAAAA,YAAc,UAE5B,EAAYC,KAAAA,GAAAA,MAAMC,QAAU,OAC5B,EAAYC,KAAAA,GAAAA,mBAAmB,WAA/B,iFAIA,EAAYC,KAAAA,GAAAA,mBAAmBC,OAAO,EAAA,KAAtC,IAEA,EAAA,KAAA,EAAA,GAAA,KAAA,MACA,EAAA,KAAA,EAAA,GAAA,KAAA,QAwIN,CAAA,IAAA,iBArIE,MAAA,WAAiB,IAAA,EAAA,KACPC,EAAYX,SAASE,cAAc,OACzCS,EAAUR,UAAUC,IAAI,iBACxBJ,SAASC,cAAc,mBAAmBW,MAAMD,GA0ChD,EAAYE,KAAAA,GAAAA,iBAAiB,SAxCP,SAAAC,GAClB,EAAI,EAAaC,EAAAA,MAAMC,KAAKF,EAAEG,OAAOC,QAErC,EAAI,EAAJ,GAAeC,QAAQ,SAAAC,GACnB,IAAIC,EAAS,IAAIC,WAEjBD,EAAOE,OAAS,SAAAT,GACZ,IAAIU,EAAOJ,EAAKK,KAAKC,OAAS,GAAKN,EAAKK,KAAOL,EAAKK,KAAKE,MAAM,EAAG,IAAM,MAEpEC,EAAYA,IAAYC,UAAUC,UAAUC,SAAS,UAErDX,EAAKY,KAAKD,SAAS,UAAaH,GAAYR,EAAKY,KAAKD,SAAS,OAC/DpB,EAAUH,mBAAmB,aACoCY,4FAAAA,OAAAA,EAAKK,KAClDX,kDAAAA,OAAAA,EAAEG,OAAOgB,OAAgBb,WAAAA,OAAAA,EAAKK,KAE9BD,wJAAAA,OAAAA,EACAU,uDAAAA,OAAAA,EAAYd,EAAKe,MALrC,kHAUAxB,EAAUH,mBAAmB,aACoCY,4FAAAA,OAAAA,EAAKK,KAEjBD,0KAAAA,OAAAA,EAGjCU,uKAAAA,OAAAA,EAAYd,EAAKe,MANrC,mHAaRd,EAAOe,cAAchB,KAEpB,EAAA,EAAL,IAAsB,EAAI,EAAJ,EAAA,GAAI,KAAA,SA2FpC,EAlKmBvB,GA6EF,SAAA,IAKX,GAJI,EAAcwC,KAAAA,GAAAA,UACd,EAAYC,KAAAA,GAAAA,aAAa,YAAY,GAGrC,EAAcC,KAAAA,GAAAA,QAAUxB,MAAMyB,QAAQ,EAAcD,KAAAA,GAAAA,QAAS,CAC7D,IAAMA,EAAS,EAAcA,KAAAA,GAAAA,OAAOE,KAAK,MAEzC,EAAYH,KAAAA,GAAAA,aAAa,SAAUC,IAI3B,SAAA,IAAA,IAAA,EAAA,KAGZ,EAAc1B,KAAAA,GAAAA,iBAAiB,QAFV,WAAA,OAAM,EAAI,EAAJ,GAAY6B,UAKvB,SAAA,IAChB,EAAkB1C,KAAAA,EAAAA,SAASE,cAAc,WACzC,EAAgBC,KAAAA,GAAAA,UAAUC,IAAI,uBAAwB,gBACtD,EAAgBC,KAAAA,GAAAA,YAAc,UAC9B,EAAgBsC,KAAAA,GAAAA,QAAQC,OAAS,WAEjC,EAAchC,KAAAA,GAAAA,MAAM,EAAA,KAApB,IAEA,EAAA,KAAA,EAAA,GAAA,KAAA,MAGa,SAAA,IAAA,IAAA,EAAA,KA6Cb,SAASiC,IACL,KAAK1C,UAAU2C,OAAO,YAH1B,EAAgBjC,KAAAA,GAAAA,iBAAiB,QA1CX,WAClB,IAAIkC,EAAQ/C,SAASgD,iBAAiB,kCAMrC,GAJDD,EAAM5B,QAAQ,SAAA8B,GACVA,EAAK9C,UAAU2C,OAAO,YAGa,aAAnC,EAAI,EAAJ,GAAgBH,QAAQC,OACxBG,EAAM5B,QAAQ,SAAA8B,GACVA,EAAKpC,iBAAiB,QAASgC,KAGnC,EAAI,EAAJ,GAAgBxC,YAAc,SAC9BL,SAASC,cAAc,mBAAmBI,YAAc,iBACxD,EAAI,EAAJ,GAAgBsC,QAAQC,OAAS,aAC9B,CAeH,GAdAG,EAAM5B,QAAQ,SAAA8B,GACVA,EAAKC,oBAAoB,QAASL,GAE9BI,EAAK9C,UAAUgD,SAAS,cACxB,EAAI,EAAc,EAAA,EAAI,EAAJ,GAAeC,OAAO,SAAAhC,GAAI,OACxCA,EAAKK,OAASwB,EAAKN,QAAQU,YAG/BJ,EAAK9C,UAAUmD,OAAO,YACtBL,EAAK9C,UAAUC,IAAI,YACnBmD,WAAW,WAAA,OAAMN,EAAKK,UAAU,SAInC,EAAI,EAAJ,GAAe5B,OAGhB,OAFA,EAAI,EAAJ,GAAgB4B,cAChB,EAAI,EAAc,EAAA,MAItB,EAAI,EAAJ,GAAgBjD,YAAc,UAC9BL,SAASC,cAAc,mBAAmBI,YAAc,uBACxD,EAAI,EAAJ,GAAgBsC,QAAQC,OAAS,cAYjD,SAASV,EAAYsB,GAEjB,IAAKA,EAAO,MAAO,SACnB,IAAMC,EAAIC,SAASC,KAAKC,MAAMD,KAAKE,IAAIL,GAASG,KAAKE,IAAI,QACzD,OAAOF,KAAKG,MAAMN,EAAQG,KAAKI,IAAI,KAAMN,IAAM,IAHjC,CAAC,QAAS,KAAM,KAAM,KAAM,MAGiBA,GAC7D,QAAA,QAAA;;AC1JF,aARA,IAAA,EAAA,EAAA,QAAA,oBAQA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GANA,IAAMO,EAAW,IAAInE,EAAJ,QAAa,SAAU,CACpCwC,UAAU,EACVE,OAAQ,CAAC,OAAQ,QAAS,OAAQ,UAGtCyB,EAASC,aACTD,EAASE","file":"app.54ca4716.js","sourceRoot":"..","sourcesContent":["export default class Uploader {\n    #openBtn;\n    #removeBtn;\n    #input;\n    #configs;\n    #fileList\n\n    constructor(selector, configs = {}) {\n        this.#input = document.querySelector(selector);\n        this.#configs = configs;\n    }\n\n    BtnCreater(selector) {\n        this.#openBtn = document.createElement(\"button\");\n\n        this.#openBtn.classList.add(\"uploader-btn__open\", \"uploader-btn\");\n        this.#openBtn.textContent = \"Открыть\";\n\n        this.#input.style.display = \"none\";\n        this.#input.insertAdjacentHTML(\"afterend\", `\n            <div class=\"uploader-btn__group\">\n            </div>\n        `);\n        this.#input.nextElementSibling.append(this.#openBtn);\n\n        this.#inputClicker();\n        this.#inputConfig();\n    }\n\n    PreviewPrinter() {\n        const imgsGroup = document.createElement(\"div\");\n        imgsGroup.classList.add(\"uploader-imgs\");\n        document.querySelector(\".uploader-title\").after(imgsGroup);\n\n        const changeHandler = e => {\n            this.#fileList = Array.from(e.target.files);\n\n            this.#fileList.forEach(file => {\n                let reader = new FileReader();\n\n                reader.onload = e => {\n                    let text = file.name.length < 15 ? file.name : file.name.slice(0, 14) + \"...\";\n\n                    let isSafari =  isSafari =  navigator.userAgent.includes('Safari') ? true : false;\n\n                    if (file.type.includes(\"image\") || (isSafari && file.type.includes(\"pdf\"))) {\n                        imgsGroup.insertAdjacentHTML('afterbegin', `\n                            <div class=\"uploader-imgs__item-container\" data-file-name=\"${file.name}\">\n                                <img src=\"${e.target.result}\" alt=\"${file.name}\" class=\"uploader-imgs__item\" />\n                                <div class=\"uploader-imgs__item-info\">\n                                    <span>${text}</span>\n                                    <span>${bytesToSize(file.size)}</span>\n                                </div>\n                            </div>\n                        `);\n                    } else {\n                        imgsGroup.insertAdjacentHTML('afterbegin', `\n                            <div class=\"uploader-imgs__item-container\" data-file-name=\"${file.name}\">\n                                <div class=\"uploader-imgs__item uploader-imgs__file\">\n                                    <span class=\"uploader-imgs__item-text\">${text}</span>\n                                </div>\n                                <div class=\"uploader-imgs__item-info\">\n                                    <span>${bytesToSize(file.size)}</span>\n                                </div>\n                            </div>\n                        `);\n                    }\n                }\n\n                reader.readAsDataURL(file);\n            });\n            if (!this.#removeBtn) this.#removeBtnCreater();\n        }\n\n        this.#input.addEventListener(\"change\", changeHandler)\n    }\n\n    #inputConfig() {\n        if (this.#configs.multiple) {\n            this.#input.setAttribute(\"multiple\", true);\n        }\n\n        if (this.#configs.accept && Array.isArray(this.#configs.accept)) {\n            const accept = this.#configs.accept.join(\", \");\n\n            this.#input.setAttribute(\"accept\", accept)\n        }\n    }\n\n    #inputClicker() {\n        const clickHandler = () => this.#input.click();\n\n        this.#openBtn.addEventListener(\"click\", clickHandler);\n    }\n    \n    #removeBtnCreater() {\n        this.#removeBtn = document.createElement(\"button\");\n        this.#removeBtn.classList.add(\"uploader-btn__remove\", \"uploader-btn\");\n        this.#removeBtn.textContent = \"Удалить\";\n        this.#removeBtn.dataset.status = \"inactive\";\n\n        this.#openBtn.after(this.#removeBtn)\n\n        this.#removeClicker();\n    }\n\n    #removeClicker() {\n        const removeHandler = () => {\n            let items = document.querySelectorAll(\".uploader-imgs__item-container\");\n\n            items.forEach(item => {\n                item.classList.toggle(\"cursor\");\n             });\n\n             if(this.#removeBtn.dataset.status === \"inactive\") {\n                items.forEach(item => {\n                    item.addEventListener(\"click\", removeAnimation);\n                 });\n\n                this.#removeBtn.textContent = \"Готово\";\n                document.querySelector(\".uploader-title\").textContent = \"Выберите файлы\";\n                this.#removeBtn.dataset.status = \"active\";\n            } else {\n                items.forEach(item => {\n                    item.removeEventListener(\"click\", removeAnimation);\n\n                    if (item.classList.contains(\"selected\")) {\n                        this.#fileList =  this.#fileList.filter(file =>\n                            file.name !== item.dataset.fileName\n                        );\n                        \n                        item.classList.remove(\"selected\");\n                        item.classList.add(\"removing\");\n                        setTimeout(() => item.remove(), 500);\n                    }\n                });\n\n                if (!this.#fileList.length) {\n                    this.#removeBtn.remove();\n                    this.#removeBtn = null;\n                    return;\n                }\n    \n                this.#removeBtn.textContent = \"Удалить\";\n                document.querySelector(\".uploader-title\").textContent = \"Загрузите ваши файлы\";\n                this.#removeBtn.dataset.status = \"inactive\";\n            }\n        }\n\n        this.#removeBtn.addEventListener(\"click\", removeHandler);\n\n        function removeAnimation()  {\n            this.classList.toggle(\"selected\");\n        }\n    }\n}\n\nfunction bytesToSize(bytes) {\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    if (!bytes) return '0 Byte';\n    const i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n    return Math.round(bytes / Math.pow(1024, i)) + ' ' + sizes[i];\n }","import Uploader from \"../js/upload.js\";\n\nconst uploader = new Uploader(\"#input\", {\n    multiple: true,\n    accept: [\".jpg\", \".docx\", \".png\", \".pdf\"]\n});\n\nuploader.BtnCreater();\nuploader.PreviewPrinter();"]}